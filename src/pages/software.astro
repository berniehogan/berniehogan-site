---
import Base from '../layouts/Base.astro';
import { getCollection } from 'astro:content';

const software = await getCollection('software');
const sorted = software.sort((a, b) => (b.data.year || 0) - (a.data.year || 0));
---

<Base title="Software · Bernie Hogan">
  <p class="muted"><a href="/">← Bernie Hogan</a></p>

  <h1>Software</h1>

  {sorted.map(async (item) => {
    const { Content } = await item.render();
    return (
      <div class="work-entry">
        <div class="work-title">
          {item.data.url ? (
            <a href={item.data.url}>{item.data.title}</a>
          ) : (
            item.data.title
          )}
          {item.data.status && <span class="muted"> · {item.data.status}</span>}
        </div>
        {item.data.year && <div class="work-meta">{item.data.year}</div>}
        <div class="work-annotation"><Content /></div>
      </div>
    );
  })}
</Base>
